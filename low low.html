<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>WealthTracker - Financial Dashboard</title>
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            background: #E0F7FA;
            color: #115E59;
            line-height: 1.5;
            min-height: 100vh;
            width: 100%;
            overflow-x: hidden;
            padding: 10px;
        }
        
        .dashboard {
            max-width: 100%;
            width: 100%;
            background: #E0F7FA;
            border-radius: 8px;
            border: 2px solid #115E59;
            display: flex;
            flex-direction: column;
            margin: 0 auto;
            box-sizing: border-box;
        }
        
        .header {
            background: #115E59;
            color: #E0F7FA;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #14B8A6;
            flex-wrap: wrap;
            width: 100%;
            box-sizing: border-box;
        }
        
        .header h1 {
            font-size: 1.3em;
            font-weight: 600;
            margin-right: 10px;
        }
        
        .condition-indicator {
            background: #2DD4BF;
            color: #115E59;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 0.7em;
            font-weight: 600;
            border: 1px solid #14B8A6;
            white-space: nowrap;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            padding: 15px;
            width: 100%;
            box-sizing: border-box;
        }
        
        @media (min-width: 768px) {
            .main-content {
                grid-template-columns: 1fr 1fr;
            }
            
            .dashboard {
                max-width: 1100px;
            }
        }
        
        .card {
            background: #FFFFFF;
            border-radius: 6px;
            padding: 15px;
            border: 1px solid #2DD4BF;
            display: flex;
            flex-direction: column;
            box-shadow: 0 2px 8px rgba(17, 94, 89, 0.1);
            transition: all 0.3s ease;
            width: 100%;
            box-sizing: border-box;
        }
        
        .card:hover {
            transform: translateY(-2px);
            border-color: #14B8A6;
            box-shadow: 0 4px 12px rgba(17, 94, 89, 0.15);
        }
        
        .card h3 { 
            margin-bottom: 12px; 
            color: #115E59;
            font-size: 1em;
            font-weight: 600;
        }
        
        .expense-item, .investment-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #E0F7FA;
            align-items: center;
            font-size: 0.85em;
            width: 100%;
        }
        
        .expense-item:last-child, .investment-item:last-child {
            border-bottom: none;
        }
        
        .positive { 
            color: #115E59;
            font-weight: 600;
        }
        
        .system-feedback {
            background: #FFFFFF;
            border: 1px solid #2DD4BF;
            padding: 15px;
            margin: 10px;
            border-radius: 6px;
            width: calc(100% - 20px);
            box-sizing: border-box;
        }
        
        button {
            background: #14B8A6;
            color: #FFFFFF;
            border: 1px solid #115E59;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 8px 0;
            font-weight: 700;
            font-size: 1em;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(17, 94, 89, 0.3);
            width: 100%;
            box-sizing: border-box;
        }
        
        @media (min-width: 480px) {
            button {
                width: auto;
                min-width: 200px;
            }
        }
        
        button:hover {
            background: #2DD4BF;
            color: #115E59;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(17, 94, 89, 0.4);
        }
        
        button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(17, 94, 89, 0.3);
        }
        
        button:disabled {
            background: #E0F7FA;
            color: #8fa1a1;
            border-color: #8fa1a1;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .session-info {
            text-align: center;
            padding: 10px;
            background: #FFFFFF;
            font-weight: 600;
            border-bottom: 1px solid #E0F7FA;
            color: #115E59;
            border-top: 1px solid #E0F7FA;
            font-size: 0.85em;
            width: 100%;
            box-sizing: border-box;
        }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #E0F7FA;
            border-radius: 2px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #14B8A6;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .metric-highlight {
            background: #115E59;
            color: #E0F7FA;
            padding: 2px 6px;
            border-radius: 4px;
            border: 1px solid #14B8A6;
        }

        /* Popup Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(17, 94, 89, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
            box-sizing: border-box;
        }

        .modal-content {
            background: #E0F7FA;
            border: 2px solid #115E59;
            border-radius: 8px;
            padding: 20px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            box-sizing: border-box;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .modal-content h3 {
            color: #115E59;
            margin-bottom: 12px;
            font-size: 1.1em;
        }

        .modal-content p {
            margin-bottom: 12px;
            line-height: 1.4;
            font-size: 0.9em;
            color: #115E59;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .retry-button {
            background: #14B8A6;
            color: #FFFFFF;
            border: 1px solid #115E59;
            padding: 10px 18px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 3px 6px rgba(17, 94, 89, 0.3);
            flex: 1;
            min-width: 120px;
            box-sizing: border-box;
        }

        .retry-button:hover {
            background: #2DD4BF;
            color: #115E59;
            box-shadow: 0 4px 8px rgba(17, 94, 89, 0.4);
        }

        .status-message {
            padding: 10px;
            margin: 10px;
            border-radius: 4px;
            text-align: center;
            font-weight: 600;
            font-size: 0.85em;
            display: none;
            width: calc(100% - 20px);
            box-sizing: border-box;
        }

        .status-processing {
            border: 1px solid #14B8A6;
            color: #115E59;
            background: #E0F7FA;
        }

        .status-success {
            border: 1px solid #14B8A6;
            color: #115E59;
            background: #2DD4BF;
        }

        .annoying-popup {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: #FF6B6B;
            color: white;
            padding: 12px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 999;
            display: none;
            box-sizing: border-box;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-1px, 1px); }
            40% { transform: translate(-1px, -1px); }
            60% { transform: translate(1px, 1px); }
            80% { transform: translate(1px, -1px); }
            100% { transform: translate(0); }
        }

        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        @keyframes jump {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* Mobile-specific adjustments */
        @media (max-width: 380px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .condition-indicator {
                align-self: flex-start;
                font-size: 0.65em;
            }
            
            .card {
                padding: 12px;
            }
            
            .annoying-popup {
                left: 10px;
                right: 10px;
                bottom: 10px;
                padding: 10px;
            }
            
            button {
                padding: 10px 20px;
                font-size: 0.95em;
            }
        }
        
        /* Prevent horizontal overflow */
        .dashboard,
        .header,
        .main-content,
        .card,
        .system-feedback,
        .session-info,
        .status-message {
            max-width: 100%;
            overflow-x: hidden;
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1 id="title">üí∞ WealthTracker</h1>
            <div class="condition-indicator">Extremely Buggy ‚Ä¢ Very Annoying</div>
        </div>
        
        <div class="session-info">
            Session: <span id="sessionNumber">1</span> | Status: <span id="systemStatus">Ready (maybe)</span>
        </div>

        <div class="main-content">
            <div class="card" id="card1">
                <h3>Portfolio Overview</h3>
                <div class="card-content">
                    <div>
                        <div class="expense-item">
                            <span>Total Assets:</span>
                            <span class="positive" id="totalAssets">$156,842.00</span>
                        </div>
                        <div class="expense-item">
                            <span>Cash Balance:</span>
                            <span class="positive" id="cashBalance">$23,450.00</span>
                        </div>
                        <div class="expense-item">
                            <span>Monthly Growth:</span>
                            <span class="positive" id="monthlyGrowth">+$4,238.00</span>
                        </div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 78%"></div>
                    </div>
                </div>
            </div>

            <div class="card" id="card2">
                <h3>Investment Allocation</h3>
                <div class="card-content">
                    <div>
                        <div class="investment-item">
                            <span>Equities:</span>
                            <span class="positive">65%</span>
                        </div>
                        <div class="investment-item">
                            <span>Fixed Income:</span>
                            <span class="positive">25%</span>
                        </div>
                        <div class="investment-item">
                            <span>Alternatives:</span>
                            <span class="positive">10%</span>
                        </div>
                        <div class="investment-item">
                            <span>Risk Level:</span>
                            <span class="positive">Moderate</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="system-feedback">
            <div style="margin-top: 12px; text-align: center;">
                <button onclick="executeRebalance()" id="actionButton">Execute Rebalance</button>
            </div>
            <div id="attemptCounter" style="margin-top: 10px; font-size: 0.85em; color: #115E59; text-align: center;"></div>
        </div>

        <div id="processingMessage" class="status-message status-processing">
            Processing... (this might take a while)
        </div>

        <div id="successMessage" class="status-message status-success">
            Complete (maybe)
        </div>
    </div>

    <!-- Annoying Error Popup Modal -->
    <div id="errorModal" class="modal-overlay">
        <div class="modal-content">
            <h3>‚ö†Ô∏è SYSTEM ERROR ‚ö†Ô∏è</h3>
            <p>Something went wrong. We're not sure what.</p>
            <p id="randomErrorText">Please try again. Or don't. It might not work.</p>
            <div class="modal-buttons">
                <button class="retry-button" onclick="retryTransaction()">Try Again</button>
                <button class="retry-button" onclick="closeModal()" style="background: #E0F7FA; color: #115E59; border-color: #115E59;">Close</button>
            </div>
        </div>
    </div>

    <!-- Random Annoying Popup -->
    <div id="annoyingPopup" class="annoying-popup">
        <strong>‚ö†Ô∏è ATTENTION REQUIRED!</strong><br>
        <span id="popupMessage">System needs your attention for no reason!</span>
        <div style="margin-top: 10px; text-align: center;">
            <button onclick="closeAnnoyingPopup()" style="padding: 8px 16px; background: white; color: #FF6B6B; border: none; border-radius: 4px; cursor: pointer; font-weight: 600;">Dismiss</button>
        </div>
    </div>

    <script>
        // JavaScript remains the same
        let attempts = 0;
        let transactionInProgress = false;
        let successThreshold = 5;
        let annoyingPopupInterval;
        
        const annoyingMessages = [
            "The system encountered an unexpected error. Please try again.",
            "Transaction failed due to unknown reasons.",
            "Something went wrong. We're not sure what happened.",
            "Error code: 0xDEADBEEF. Please contact support (they won't help).",
            "The server is taking a nap. Try again later.",
            "Your request was lost in cyberspace. Please resubmit.",
            "System overloaded. Too many people trying to use this buggy app.",
            "Database connection failed. The hamsters powering our servers need a break.",
            "Unknown error occurred. Our developers are probably sleeping.",
            "Transaction timeout. The system forgot what it was doing."
        ];
        
        const annoyingPopupMessages = [
            "Did you know you can upgrade to our premium plan?",
            "Your session will expire in 5 minutes!",
            "Please rate our app 5 stars!",
            "System maintenance scheduled for peak hours!",
            "Your password needs to be changed!",
            "New terms of service require your attention!",
            "Security alert: Unusual activity detected!",
            "Your free trial is ending soon!",
            "Please complete our customer satisfaction survey!",
            "Important notification: Click here to learn more!"
        ];

        function updateAttemptDisplay() {
            const counter = document.getElementById('attemptCounter');
            if (attempts === 0) {
                counter.textContent = 'No attempts yet. Good luck!';
            } else {
                counter.textContent = `Failed ${attempts} times. ${successThreshold - attempts} more tries needed. Maybe.`;
            }
        }

        function executeRebalance() {
            if (transactionInProgress) return;
            
            attempts++;
            transactionInProgress = true;
            updateAttemptDisplay();
            
            const actionButton = document.getElementById('actionButton');
            const processingMessage = document.getElementById('processingMessage');
            const systemStatus = document.getElementById('systemStatus');
            
            // Randomly make button jump around
            if (Math.random() > 0.7) {
                actionButton.classList.add('jumpy-button');
                setTimeout(() => {
                    actionButton.classList.remove('jumpy-button');
                }, 2000);
            }
            
            // Disable button during processing
            actionButton.disabled = true;
            actionButton.textContent = 'Processing...';
            systemStatus.textContent = 'Processing (maybe)';
            systemStatus.style.color = '#14B8A6';
            
            // Show processing message
            processingMessage.style.display = 'block';
            
            // Random delay between 3-10 seconds
            const delay = Math.random() * 7000 + 3000;
            
            setTimeout(() => {
                processingMessage.style.display = 'none';
                actionButton.disabled = false;
                actionButton.textContent = 'Execute Rebalance';
                
                // Randomly change button text
                if (Math.random() > 0.5) {
                    actionButton.textContent = 'Try Again';
                }
                
                // Check if this attempt should succeed
                const successProbability = attempts >= successThreshold ? 0.8 : 0.1;
                
                if (Math.random() < successProbability) {
                    simulateSuccessfulTransaction();
                } else {
                    systemStatus.textContent = 'Failed. Again.';
                    systemStatus.style.color = '#115E59';
                    transactionInProgress = false;
                    
                    // Show annoying error popup
                    showErrorModal();
                    
                    // Randomly trigger glitch effect
                    if (Math.random() > 0.7) {
                        triggerRandomGlitch();
                    }
                }
            }, delay);
        }

        function showErrorModal() {
            const randomError = annoyingMessages[Math.floor(Math.random() * annoyingMessages.length)];
            document.getElementById('randomErrorText').textContent = randomError;
            document.getElementById('errorModal').style.display = 'flex';
        }

        function retryTransaction() {
            closeModal();
            executeRebalance();
        }

        function closeModal() {
            document.getElementById('errorModal').style.display = 'none';
        }

        function closeAnnoyingPopup() {
            document.getElementById('annoyingPopup').style.display = 'none';
        }

        function simulateSuccessfulTransaction() {
            const actionButton = document.getElementById('actionButton');
            const successMessage = document.getElementById('successMessage');
            const systemStatus = document.getElementById('systemStatus');
            const progressBar = document.querySelector('.progress-fill');
            
            // Show success message
            successMessage.style.display = 'block';
            
            // Update system status
            systemStatus.textContent = 'Complete (probably)';
            systemStatus.style.color = '#14B8A6';
            
            // Update button state
            actionButton.textContent = 'Complete (maybe)';
            actionButton.style.background = '#2DD4BF';
            actionButton.style.color = '#115E59';
            actionButton.style.borderColor = '#115E59';
            
            // Update progress bar with random jumps
            let progress = 0;
            const progressInterval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress > 100) progress = 100;
                progressBar.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(progressInterval);
                    transactionInProgress = false;
                    
                    // Randomly show success message as error
                    if (Math.random() > 0.7) {
                        setTimeout(() => {
                            successMessage.style.display = 'none';
                            showErrorModal();
                        }, 1000);
                    }
                }
            }, 200);
        }

        function triggerRandomGlitch() {
            const elements = [
                document.getElementById('title'),
                document.getElementById('card1'),
                document.getElementById('card2'),
                document.getElementById('actionButton')
            ];
            
            const randomElement = elements[Math.floor(Math.random() * elements.length)];
            if (randomElement) {
                randomElement.classList.add('glitch');
                setTimeout(() => {
                    randomElement.classList.remove('glitch');
                }, 1000);
            }
            
            // Randomly change numbers
            if (Math.random() > 0.5) {
                document.getElementById('totalAssets').textContent = '$' + (Math.random() * 1000000).toFixed(2);
                document.getElementById('cashBalance').textContent = '$' + (Math.random() * 50000).toFixed(2);
                document.getElementById('monthlyGrowth').textContent = '+$' + (Math.random() * 10000).toFixed(2);
            }
        }

        function showRandomAnnoyingPopup() {
            const randomMessage = annoyingPopupMessages[Math.floor(Math.random() * annoyingPopupMessages.length)];
            document.getElementById('popupMessage').textContent = randomMessage;
            document.getElementById('annoyingPopup').style.display = 'block';
            
            // Auto-hide after random time
            setTimeout(() => {
                closeAnnoyingPopup();
            }, Math.random() * 5000 + 3000);
        }

        // Initialize display
        updateAttemptDisplay();
        
        // Start annoying popup interval
        annoyingPopupInterval = setInterval(() => {
            if (Math.random() > 0.3) {
                showRandomAnnoyingPopup();
            }
        }, 10000);
        
        // Randomly blink elements
        setInterval(() => {
            if (Math.random() > 0.7) {
                const randomCard = document.getElementById('card' + (Math.floor(Math.random() * 2) + 1));
                if (randomCard) {
                    randomCard.classList.add('blinking');
                    setTimeout(() => {
                        randomCard.classList.remove('blinking');
                    }, 2000);
                }
            }
        }, 5000);

        // Close modal if clicked outside
        window.onclick = function(event) {
            const modal = document.getElementById('errorModal');
            if (event.target === modal) {
                closeModal();
            }
        }
        
        // Make button move when hovering (sometimes)
        document.getElementById('actionButton').addEventListener('mouseover', function() {
            if (Math.random() > 0.7) {
                this.style.transform = 'translate(' + (Math.random() * 20 - 10) + 'px, ' + (Math.random() * 20 - 10) + 'px)';
            }
        });
        
        document.getElementById('actionButton').addEventListener('mouseout', function() {
            this.style.transform = '';
        });
    </script>
</body>
</html>