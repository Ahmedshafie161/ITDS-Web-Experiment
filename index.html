<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>WealthTracker - Dashboard Variants</title>

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; overflow: hidden; }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #E0F7FA;
      color: #115E59;
      line-height: 1.5;
    }

    .container {
      display: flex;
      height: 100vh;
      width: 100%;
      overflow: hidden;
      position: relative;
    }

    /* Side drawer tab */
    .drawer-tab {
      position: fixed;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      background: #115E59;
      color: #E0F7FA;
      padding: 40px 8px;
      cursor: pointer;
      z-index: 1001;
      border-radius: 0 8px 8px 0;
      border: 2px solid #14B8A6;
      border-left: none;
      writing-mode: vertical-rl;
      text-orientation: mixed;
      font-weight: 700;
      font-size: 0.9rem;
      box-shadow: 2px 0 8px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }

    .drawer-tab:hover {
      background: #14B8A6;
      padding-right: 12px;
    }

    /* Overlay for drawer */
    .drawer-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(17, 94, 89, 0.7);
      z-index: 999;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .drawer-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }

    /* Side drawer */
    .vertical-nav {
      position: fixed;
      left: -280px;
      top: 0;
      height: 100vh;
      width: 280px;
      background: #115E59;
      color: #E0F7FA;
      display: flex;
      flex-direction: column;
      border-right: 2px solid #14B8A6;
      z-index: 1000;
      transition: left 0.3s ease;
      overflow-y: auto;
      box-shadow: 4px 0 12px rgba(0,0,0,0.3);
    }

    .vertical-nav.open {
      left: 0;
    }

    .nav-header { 
      padding: 20px 15px;
      border-bottom: 2px solid #14B8A6; 
      text-align: center;
      flex-shrink: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .nav-header h1 { 
      font-size: 1.2rem; 
      font-weight: 600;
      flex: 1;
    }

    .close-btn {
      background: none;
      border: none;
      color: #E0F7FA;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      transition: background 0.2s;
    }

    .close-btn:hover {
      background: rgba(255,255,255,0.1);
    }

    .nav-tabs {
      display: flex;
      flex-direction: column;
      width: 100%;
    }

    .nav-tab {
      padding: 16px 15px;
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      border: none;
      background: none;
      color: inherit;
      text-align: left;
      font-weight: 700;
      border-bottom: 1px solid rgba(20,184,166,0.12);
      width: 100%;
      font-size: 0.9rem;
      flex-shrink: 0;
      transition: all 0.2s;
    }

    .nav-tab:hover { 
      background: rgba(255,255,255,0.05); 
      color: #2DD4BF;
      padding-left: 20px;
    }
    
    .nav-tab.active { 
      background: #14B8A6; 
      color: white;
      border-left: 4px solid #2DD4BF;
    }

    .tab-icon { font-size: 1.1rem; width: 26px; flex-shrink: 0; }
    .tab-text { flex: 1; line-height: 1.3; }

    .dashboard {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      background: white;
      width: 100%;
      min-height: 0;
    }

    .tab-content {
      width: 100%;
      height: 100%;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .tab-pane {
      display: none;
      width: 100%;
      height: 100%;
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }

    .tab-pane.active {
      display: flex;
      flex-direction: column;
    }

    .iframe-container {
      width: 100%;
      height: 100%;
      overflow: auto;
      background: white;
      -webkit-overflow-scrolling: touch;
      position: relative;
    }

    .iframe-container iframe {
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
      background: #fff;
    }

    .survey-full {
      width: 100%;
      height: 100%;
      overflow: auto;
      background: white;
      -webkit-overflow-scrolling: touch;
    }

    .survey-full iframe {
      width: 100%;
      height: 100%;
      min-height: 600px;
      border: 0;
      background: white;
    }

    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #115E59;
      font-size: 0.9rem;
    }

    /* Desktop styles */
    @media (min-width: 768px) {
      .drawer-tab {
        display: none;
      }

      .drawer-overlay {
        display: none;
      }

      .vertical-nav { 
        position: relative;
        left: 0;
        width: 260px;
        box-shadow: none;
      }

      .close-btn {
        display: none;
      }

      .survey-full iframe {
        min-height: 100vh;
      }
    }

    .nav-tab:focus { 
      outline: 3px solid rgba(20,184,166,0.25); 
      outline-offset: -2px; 
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Drawer Tab (mobile only) -->
    <div class="drawer-tab" id="drawerTab">‚ò∞ MENU</div>

    <!-- Overlay -->
    <div class="drawer-overlay" id="drawerOverlay"></div>

    <!-- Side Navigation Drawer -->
    <nav class="vertical-nav" id="verticalNav" aria-label="Main navigation">
      <div class="nav-header">
        <h1>üí∞ WealthTracker</h1>
        <button class="close-btn" id="closeBtn" aria-label="Close menu">√ó</button>
      </div>

      <div class="nav-tabs" role="tablist">
        <button class="nav-tab active" data-tab="high-high" role="tab" aria-selected="true">
          <span class="tab-icon">üìä</span>
          <span class="tab-text">High Reliability ‚Ä¢ High Transparency</span>
        </button>

        <button class="nav-tab" data-tab="high-low" role="tab" aria-selected="false">
          <span class="tab-icon">üîí</span>
          <span class="tab-text">High Reliability ‚Ä¢ Low Transparency</span>
        </button>

        <button class="nav-tab" data-tab="low-high" role="tab" aria-selected="false">
          <span class="tab-icon">‚ö†Ô∏è</span>
          <span class="tab-text">Low Reliability ‚Ä¢ High Transparency</span>
        </button>

        <button class="nav-tab" data-tab="low-low" role="tab" aria-selected="false">
          <span class="tab-icon">üö´</span>
          <span class="tab-text">Low Reliability ‚Ä¢ Low Transparency</span>
        </button>

        <button class="nav-tab" data-tab="survey" role="tab" aria-selected="false">
          <span class="tab-icon">üìù</span>
          <span class="tab-text">Survey (Experiment)</span>
        </button>
      </div>
    </nav>

    <!-- Main Dashboard Content -->
    <main class="dashboard" role="main">
      <div class="tab-content" id="tabContent">

        <section class="tab-pane active" id="high-high" role="tabpanel" aria-hidden="false">
          <div class="iframe-container" aria-hidden="false">
            <div class="loading">Loading dashboard...</div>
            <iframe src="high reliable high transparency.html" title="High Reliability High Transparency"></iframe>
          </div>
        </section>

        <section class="tab-pane" id="high-low" role="tabpanel" aria-hidden="true">
          <div class="iframe-container" aria-hidden="true">
            <div class="loading">Loading dashboard...</div>
            <iframe src="high reliable low transparence.html" title="High Reliability Low Transparency"></iframe>
          </div>
        </section>

        <section class="tab-pane" id="low-high" role="tabpanel" aria-hidden="true">
          <div class="iframe-container" aria-hidden="true">
            <div class="loading">Loading dashboard...</div>
            <iframe src="low reliable high transparency.html" title="Low Reliability High Transparency"></iframe>
          </div>
        </section>

        <section class="tab-pane" id="low-low" role="tabpanel" aria-hidden="true">
          <div class="iframe-container" aria-hidden="true">
            <div class="loading">Loading dashboard...</div>
            <iframe src="low low.html" title="Low Reliability Low Transparency"></iframe>
          </div>
        </section>

        <section class="tab-pane" id="survey" role="tabpanel" aria-hidden="true">
          <div class="survey-full" aria-live="polite">
            <iframe
              src="https://docs.google.com/forms/d/e/1FAIpQLSfdEVcfJBDwNVTDFTSJ9QSgxQZ0E0f1Di_B-Wy6q55uimG4DQ/viewform?embedded=true"
              title="WealthTracker Experiment Survey"
              allowfullscreen
              aria-label="Experiment survey form">
              Loading‚Ä¶
            </iframe>
          </div>
        </section>

      </div>
    </main>
  </div>

  <script>
    (function () {
      const tabs = Array.from(document.querySelectorAll('.nav-tab'));
      const panes = Array.from(document.querySelectorAll('.tab-pane'));
      const drawerTab = document.getElementById('drawerTab');
      const verticalNav = document.getElementById('verticalNav');
      const drawerOverlay = document.getElementById('drawerOverlay');
      const closeBtn = document.getElementById('closeBtn');

      function setActive(tabBtn) {
        const targetId = tabBtn.getAttribute('data-tab');

        tabs.forEach(t => {
          const isActive = t === tabBtn;
          t.classList.toggle('active', isActive);
          t.setAttribute('aria-selected', isActive ? 'true' : 'false');
        });

        panes.forEach(p => {
          const isTarget = p.id === targetId;
          p.classList.toggle('active', isTarget);
          p.setAttribute('aria-hidden', isTarget ? 'false' : 'true');
        });

        // Close drawer on mobile after selection
        if (window.innerWidth < 768) {
          closeDrawer();
        }
      }

      function openDrawer() {
        verticalNav.classList.add('open');
        drawerOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
      }

      function closeDrawer() {
        verticalNav.classList.remove('open');
        drawerOverlay.classList.remove('active');
        document.body.style.overflow = '';
      }

      // Drawer controls
      drawerTab.addEventListener('click', openDrawer);
      closeBtn.addEventListener('click', closeDrawer);
      drawerOverlay.addEventListener('click', closeDrawer);

      // Tab switching
      tabs.forEach(tab => {
        tab.addEventListener('click', () => setActive(tab));
        tab.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            setActive(tab);
          }
        });
      });

      const initial = document.querySelector('.nav-tab.active') || tabs[0];
      if (initial) setActive(initial);

      // Hide loading indicators after iframes load
      const iframes = document.querySelectorAll('iframe');
      iframes.forEach(iframe => {
        iframe.addEventListener('load', () => {
          const container = iframe.closest('.iframe-container, .survey-full');
          if (container) {
            const loading = container.querySelector('.loading');
            if (loading) loading.style.display = 'none';
          }
        });
      });

      // Close drawer on ESC key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && verticalNav.classList.contains('open')) {
          closeDrawer();
        }
      });
    })();
  </script>
</body>
</html>